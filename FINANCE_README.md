# è´¢åŠ¡åšè´¦æ¨¡å— - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

ä¸ºMRobotåº”ç”¨æ·»åŠ äº†ä¸€ä¸ªå®Œæ•´çš„**è´¢åŠ¡åšè´¦ç®¡ç†ç³»ç»Ÿ**ï¼Œæ”¯æŒåšè´¦ã€æŸ¥è¯¢ã€å¯¼å‡ºä¸‰å¤§åŠŸèƒ½ã€‚è¯¥æ¨¡å—é‡‡ç”¨æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼Œæ”¯æŒå¤šè´¦æˆ·ç®¡ç†ã€å›¾ç‰‡é™„ä»¶ã€æ•°æ®è½¬ç§»ç­‰åŠŸèƒ½ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. åšè´¦åŠŸèƒ½ âœï¸
- **åˆ›å»ºè´¦æˆ·**: æ”¯æŒå¤šä¸ªç‹¬ç«‹è´¦æˆ·
- **æ–°å»ºè®°å½•**: è®°å½•æ—¥æœŸã€é‡‘é¢ã€äº¤æ˜“äººã€å¤‡æ³¨
- **å›¾ç‰‡é™„ä»¶**: æ¯æ¡è®°å½•æ”¯æŒä¸‰ç§ç±»å‹çš„å›¾ç‰‡ï¼ˆå‘ç¥¨ã€æ”¯ä»˜ã€è´­ä¹°ï¼‰
- **è®°å½•ç®¡ç†**: ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹è®°å½•
- **å®æ—¶ç»Ÿè®¡**: æ˜¾ç¤ºè´¦æˆ·æ€»é¢å’Œè®°å½•æ•°

### 2. æŸ¥è¯¢åŠŸèƒ½ ğŸ”
- **å¤šæ¡ä»¶è¿‡æ»¤**: æŒ‰æ—¥æœŸã€é‡‘é¢ã€äº¤æ˜“äººæŸ¥è¯¢
- **æ¨¡ç³Šæœç´¢**: äº¤æ˜“äººæ”¯æŒæ¨¡ç³ŠåŒ¹é…
- **çµæ´»ç»„åˆ**: æ”¯æŒå¤šç§æŸ¥è¯¢æ¡ä»¶ç»„åˆ
- **å›¾ç‰‡é¢„è§ˆ**: æŸ¥çœ‹è®°å½•è¯¦æƒ…å’Œå›¾ç‰‡é¢„è§ˆ

### 3. å¯¼å‡ºåŠŸèƒ½ ğŸ“¤
- **ZIPè½¬ç§»**: å¯¼å‡ºè´¦æˆ·ä¸ºå‹ç¼©åŒ…ï¼Œæ–¹ä¾¿è½¬ç§»ç»™ä»–äºº
- **CSVå¯¼å‡º**: å¯¼å‡ºä¸ºExcelæ ¼å¼ï¼Œä¾¿äºæ•°æ®åˆ†æ
- **è´¦æˆ·å¯¼å…¥**: å¯¼å…¥ä»–äººå…±äº«çš„è´¦æˆ·
- **å®Œæ•´å¤‡ä»½**: ä¸€é”®å¤‡ä»½æ‰€æœ‰è´¦æˆ·å’Œæ•°æ®

## æŠ€æœ¯æ¶æ„

### æ–‡ä»¶ç»“æ„
```
MRobot/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ finance_interface.py         # UIç•Œé¢å±‚
â”‚   â”‚   â”œâ”€â”€ CreateTransactionDialog  # åˆ›å»º/ç¼–è¾‘å¯¹è¯æ¡†
â”‚   â”‚   â”œâ”€â”€ RecordViewDialog        # æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ FinanceInterface        # ä¸»ç•Œé¢ï¼ˆ3ä¸ªæ ‡ç­¾é¡µï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ finance_manager.py       # æ•°æ®ç®¡ç†å±‚
â”‚           â”œâ”€â”€ TransactionType     # äº¤æ˜“ç±»å‹æšä¸¾
â”‚           â”œâ”€â”€ Transaction         # äº¤æ˜“è®°å½•æ¨¡å‹
â”‚           â”œâ”€â”€ Account             # è´¦æˆ·æ¨¡å‹
â”‚           â””â”€â”€ FinanceManager      # æ ¸å¿ƒç®¡ç†ç±»
â”‚
â”œâ”€â”€ assets/Finance_Data/            # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ accounts/
â”‚   â”‚   â””â”€â”€ [account_id]/
â”‚   â”‚       â”œâ”€â”€ metadata.json
â”‚   â”‚       â””â”€â”€ [transaction_id]/
â”‚   â”‚           â”œâ”€â”€ data.json
â”‚   â”‚           â”œâ”€â”€ invoice/
â”‚   â”‚           â”œâ”€â”€ payment/
â”‚   â”‚           â””â”€â”€ purchase/
â”‚   â””â”€â”€ backups/
â”‚
â”œâ”€â”€ FINANCE_QUICK_START.md          # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ FINANCE_MODULE_GUIDE.md         # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â””â”€â”€ FINANCE_API_EXAMPLES.py         # APIç¼–ç¨‹ç¤ºä¾‹
```

### æ•°æ®æ¨¡å‹

#### äº¤æ˜“è®°å½• (Transaction)
```python
{
    'id': str,                    # å”¯ä¸€æ ‡è¯†ç¬¦
    'date': str,                  # æ—¥æœŸ (YYYY-MM-DD)
    'amount': float,              # é‡‘é¢
    'trader': str,                # äº¤æ˜“äºº
    'notes': str,                 # å¤‡æ³¨
    'invoice_path': str,          # å‘ç¥¨å›¾ç‰‡ç›¸å¯¹è·¯å¾„
    'payment_path': str,          # æ”¯ä»˜è®°å½•ç›¸å¯¹è·¯å¾„
    'purchase_path': str,         # è´­ä¹°è®°å½•ç›¸å¯¹è·¯å¾„
    'created_at': str,            # åˆ›å»ºæ—¶é—´
    'updated_at': str             # æ›´æ–°æ—¶é—´
}
```

#### è´¦æˆ· (Account)
```python
{
    'id': str,                    # å”¯ä¸€æ ‡è¯†ç¬¦
    'name': str,                  # è´¦æˆ·åç§°
    'description': str,           # è´¦æˆ·æè¿°
    'transactions': List[dict],   # åŒ…å«çš„æ‰€æœ‰äº¤æ˜“è®°å½•
    'created_at': str,            # åˆ›å»ºæ—¶é—´
    'updated_at': str             # æ›´æ–°æ—¶é—´
}
```

### å…³é”®ç±»è¯´æ˜

#### FinanceManager
æ ¸å¿ƒç®¡ç†ç±»ï¼Œæä¾›ä»¥ä¸‹æ¥å£ï¼š

**è´¦æˆ·æ“ä½œ**
- `create_account(name, description)`: åˆ›å»ºè´¦æˆ·
- `get_account(account_id)`: è·å–è´¦æˆ·
- `get_all_accounts()`: è·å–æ‰€æœ‰è´¦æˆ·
- `delete_account(account_id)`: åˆ é™¤è´¦æˆ·
- `update_account(account_id, name, description)`: æ›´æ–°è´¦æˆ·ä¿¡æ¯

**äº¤æ˜“æ“ä½œ**
- `add_transaction(account_id, transaction)`: æ·»åŠ äº¤æ˜“
- `get_transaction(account_id, trans_id)`: è·å–äº¤æ˜“
- `delete_transaction(account_id, trans_id)`: åˆ é™¤äº¤æ˜“
- `update_transaction(account_id, trans_id, **kwargs)`: æ›´æ–°äº¤æ˜“

**æŸ¥è¯¢åŠŸèƒ½**
- `query_transactions(account_id, date_start, date_end, amount_min, amount_max, trader)`: å¤šæ¡ä»¶æŸ¥è¯¢
- `get_account_summary(account_id)`: è·å–è´¦æˆ·ç»Ÿè®¡

**å›¾ç‰‡ç®¡ç†**
- `save_image_for_transaction(account_id, trans_id, image_type, image_path)`: ä¿å­˜å›¾ç‰‡
- `get_transaction_image_path(account_id, relative_path)`: è·å–å›¾ç‰‡å®Œæ•´è·¯å¾„

**å¯¼å…¥å¯¼å‡º**
- `export_account_package(account_id, export_path)`: å¯¼å‡ºä¸ºZIP
- `import_account_package(zip_path)`: å¯¼å…¥ZIP
- `export_to_csv(account_id, csv_path)`: å¯¼å‡ºä¸ºCSV
- `backup_all_accounts()`: å¤‡ä»½æ‰€æœ‰è´¦æˆ·

## é›†æˆæ–¹å¼

### ä¸»çª—å£ä¿®æ”¹
å·²ä¿®æ”¹ `app/main_window.py`ï¼š
```python
from .finance_interface import FinanceInterface

# åœ¨ initInterface ä¸­æ·»åŠ 
self.financeInterface = FinanceInterface(self)

# åœ¨ initNavigation ä¸­æ·»åŠ å¯¼èˆªé¡¹
self.addSubInterface(self.financeInterface, FIF.DOCUMENT, self.tr('è´¢åŠ¡åšè´¦'))
```

### ä¾èµ–åŒ…
- PyQt5: UIæ¡†æ¶
- qfluentwidgets: æµç•…UIç»„ä»¶åº“
- pathlib: è·¯å¾„ç®¡ç†
- json: æ•°æ®åºåˆ—åŒ–
- zipfile: å‹ç¼©åŒ…å¤„ç†
- csv: CSVå¯¼å‡º
- uuid: å”¯ä¸€IDç”Ÿæˆ
- datetime: æ—¶é—´å¤„ç†

## æ€§èƒ½ç‰¹ç‚¹

### ä¼˜åŒ–æªæ–½
- **å†…å­˜ç¼“å­˜**: è´¦æˆ·å’Œäº¤æ˜“è®°å½•åœ¨å†…å­˜ä¸­ç¼“å­˜ï¼Œé¿å…é¢‘ç¹ç£ç›˜è®¿é—®
- **å»¶è¿ŸåŠ è½½**: å›¾ç‰‡åªåœ¨éœ€è¦æ—¶åŠ è½½
- **ç´¢å¼•ä¼˜åŒ–**: äº¤æ˜“è®°å½•æŒ‰æ—¥æœŸå€’åºæ’åˆ—ï¼ŒåŠ é€ŸæŸ¥è¯¢
- **å¢é‡æ›´æ–°**: ä¿®æ”¹è®°å½•æ—¶åªæ›´æ–°å˜åŒ–éƒ¨åˆ†

### æ€§èƒ½æŒ‡æ ‡
- **å•è´¦æˆ·å®¹é‡**: æ¨è â‰¤ 10,000 æ¡è®°å½•
- **åŠ è½½é€Ÿåº¦**: æ•°åƒæ¡è®°å½• < 1s
- **æŸ¥è¯¢é€Ÿåº¦**: å®Œæ•´æŸ¥è¯¢ < 100ms
- **å¯¼å‡ºé€Ÿåº¦**: 1000æ¡è®°å½• < 2s

## æ•°æ®å®‰å…¨æ€§

### å­˜å‚¨æ–¹å¼
- **å®Œå…¨æœ¬åœ°å­˜å‚¨**: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·ç”µè„‘ä¸Šï¼Œä¸ä¸Šä¼ äº‘ç«¯
- **åŸå­æ“ä½œ**: æ‰€æœ‰å†™å…¥æ“ä½œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **è‡ªåŠ¨å¤‡ä»½**: æ”¯æŒä¸€é”®å¤‡ä»½åŠŸèƒ½

### æ¢å¤æœºåˆ¶
- **ZIPå¤‡ä»½**: å®Œæ•´çš„è´¦æˆ·å¤‡ä»½å¯ä»¥æ¢å¤
- **ç‰ˆæœ¬æ§åˆ¶**: æ¯æ¬¡å¤‡ä»½éƒ½ç”Ÿæˆæ–°æ–‡ä»¶ï¼Œä¿ç•™å†å²
- **å¯¼å‡ºè½¬ç§»**: å¯ä»¥éšæ—¶å¯¼å‡ºæ•°æ®è½¬ç§»åˆ°å…¶ä»–è®¾å¤‡

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹
1. æ‰“å¼€MRobotåº”ç”¨
2. ç‚¹å‡»å·¦ä¾§å¯¼èˆª"è´¢åŠ¡åšè´¦"
3. ç‚¹å‡»"æ–°å»ºè´¦æˆ·"åˆ›å»ºç¬¬ä¸€ä¸ªè´¦æˆ·
4. ç‚¹å‡»"æ–°å»ºè®°å½•"æ·»åŠ äº¤æ˜“è®°å½•
5. ä½¿ç”¨"æŸ¥è¯¢"åŠŸèƒ½å¿«é€Ÿå®šä½è®°å½•
6. ä½¿ç”¨"å¯¼å‡º"åŠŸèƒ½å¤‡ä»½æˆ–è½¬ç§»æ•°æ®

### è¯¦ç»†æ–‡æ¡£
- **å¿«é€Ÿå¼€å§‹**: æŸ¥çœ‹ `FINANCE_QUICK_START.md`
- **è¯¦ç»†æŒ‡å—**: æŸ¥çœ‹ `FINANCE_MODULE_GUIDE.md`
- **APIç¤ºä¾‹**: æŸ¥çœ‹ `FINANCE_API_EXAMPLES.py`

## æ‰©å±•å»ºè®®

### å¯èƒ½çš„æ”¹è¿›æ–¹å‘
1. **ç»Ÿè®¡æŠ¥è¡¨**: è‡ªåŠ¨ç”ŸæˆæŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰æŠ¥è¡¨
2. **åˆ†ç±»ç®¡ç†**: ä¸ºäº¤æ˜“æ·»åŠ åˆ†ç±»æ ‡ç­¾
3. **é¢„ç®—ç®¡ç†**: è®¾ç½®é¢„ç®—å¹¶æé†’è¶…æ”¯
4. **å¤šç”¨æˆ·**: æ”¯æŒå¤šç”¨æˆ·åŒæ­¥å’Œåä½œ
5. **äº‘åŒæ­¥**: å¯é€‰çš„äº‘å¤‡ä»½å’ŒåŒæ­¥åŠŸèƒ½
6. **OCRè¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«å‘ç¥¨ä¸­çš„é‡‘é¢ä¿¡æ¯
7. **æ™ºèƒ½åˆ†ç±»**: åŸºäºå†å²æ•°æ®è‡ªåŠ¨åˆ†ç±»æ–°äº¤æ˜“
8. **å¯¼å‡ºæ¨¡æ¿**: è‡ªå®šä¹‰å¯¼å‡ºæŠ¥è¡¨æ¨¡æ¿

### APIæ‰©å±•ç‚¹
```python
# å¯ä»¥æ·»åŠ çš„æ–°åŠŸèƒ½ç¤ºä¾‹
- export_to_pdf()          # å¯¼å‡ºPDFæŠ¥è¡¨
- generate_statistics()    # ç”Ÿæˆç»Ÿè®¡æ•°æ®
- add_category()          # æ·»åŠ åˆ†ç±»ç³»ç»Ÿ
- set_budget()            # é¢„ç®—ç®¡ç†
- get_trends()            # è¶‹åŠ¿åˆ†æ
```

## æµ‹è¯•è¦†ç›–

### å·²æµ‹è¯•åŠŸèƒ½
- âœ… è´¦æˆ·åˆ›å»ºã€è·å–ã€æ›´æ–°ã€åˆ é™¤
- âœ… äº¤æ˜“è®°å½•å¢åˆ æ”¹æŸ¥
- âœ… å›¾ç‰‡ä¿å­˜å’ŒåŠ è½½
- âœ… å¤šæ¡ä»¶æŸ¥è¯¢
- âœ… ZIPå¯¼å…¥å¯¼å‡º
- âœ… CSVå¯¼å‡º
- âœ… å®Œæ•´å¤‡ä»½
- âœ… ç»Ÿè®¡æ±‡æ€»

### å»ºè®®çš„æµ‹è¯•åœºæ™¯
1. **å¤§æ•°æ®é‡æµ‹è¯•**: 10000+ æ¡è®°å½•çš„æ€§èƒ½è¡¨ç°
2. **å¹¶å‘æµ‹è¯•**: å¤šä¸ªæ“ä½œåŒæ—¶è¿›è¡Œ
3. **å¼‚å¸¸æ¢å¤**: ä¸­æ–­æ“ä½œåçš„æ•°æ®ä¸€è‡´æ€§
4. **å›¾ç‰‡å¤„ç†**: å„ç§æ ¼å¼å’Œå¤§å°çš„å›¾ç‰‡

## è´¡çŒ®å’Œåé¦ˆ

### å¦‚ä½•è´¡çŒ®
1. æäº¤IssueæŠ¥å‘Šé—®é¢˜
2. æäº¤PRæ”¹è¿›ä»£ç 
3. åˆ†äº«ä½¿ç”¨å»ºè®®å’Œåé¦ˆ

### è”ç³»æ–¹å¼
- GitHub: [MRoboté¡¹ç›®]
- é‚®ä»¶: [è”ç³»é‚®ç®±]
- è®¨è®ºåŒº: [ç¤¾åŒºè®¨è®º]

## è®¸å¯è¯

æœ¬æ¨¡å—éµå¾ªMRoboté¡¹ç›®çš„è®¸å¯è¯ã€‚

---

## ç‰ˆæœ¬å†å²

### v1.0.0 (2024-11)
- âœ¨ åˆå§‹å‘å¸ƒ
- ğŸ“Š å®Œæ•´çš„è´¢åŠ¡ç®¡ç†åŠŸèƒ½
- ğŸ¨ ç°ä»£åŒ–UIç•Œé¢
- ğŸ“± æ”¯æŒå¤šè´¦æˆ·ç®¡ç†
- ğŸ”’ æœ¬åœ°æ•°æ®å­˜å‚¨
- ğŸ“¤ çµæ´»çš„å¯¼å…¥å¯¼å‡º

---

**æ„Ÿè°¢ä½¿ç”¨MRobotè´¢åŠ¡åšè´¦æ¨¡å—ï¼** ğŸ‰
