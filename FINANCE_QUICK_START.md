# 财务模块 - 快速开始指南

## 什么是财务做账模块？

财务做账模块是MRobot内置的一个完整的财务管理系统，用于：
- 📊 记录和管理财务交易
- 📸 保存交易相关的凭证图片
- 🔍 快速查询和统计
- 📤 导出转移和备份数据

## 5分钟快速上手

### 第一步：打开财务做账页面

1. 启动 MRobot 应用
2. 在左侧导航栏找到"财务做账"
3. 点击进入财务模块

### 第二步：创建你的第一个账户

1. 点击"新建账户"按钮
2. 输入账户名称（例如：2024年项目经费）
3. 可选：输入账户描述
4. 点击确定

> **提示**: 你可以为不同的项目、部门或时间周期创建多个账户

### 第三步：添加第一条交易记录

1. 确保已选择正确的账户
2. 点击"新建记录"按钮
3. 填写以下信息：
   - **日期**: 交易发生的日期
   - **金额**: 交易金额（必填，且必须 > 0）
   - **交易人**: 与谁进行的交易（例如：张三、供应商A）
   - **备注**: 关于这笔交易的说明（可选）
4. 上传图片（可选）：
   - 发票图片：上传发票照片
   - 支付记录：上传支付截图或凭证
   - 购买记录：上传订单或收据
5. 点击"保存"

> **提示**: 图片会自动整理在账户目录中，无需手动管理文件

### 第四步：查看和管理记录

在"做账"标签页的表格中，你可以：
- ✏️ **编辑**: 修改已有记录
- 🗑️ **删除**: 删除不需要的记录
- 👁️ **查看**: 查看完整详情和预览图片

## 常用功能速查

### 查询记录

1. 切换到"查询"标签页
2. 设置查询条件：
   - 日期范围：默认最近一个月
   - 金额范围：可选
   - 交易人：输入名称进行搜索
3. 点击"查询"按钮
4. 查看结果列表

**查询小技巧**：
- 交易人搜索支持模糊匹配（例如搜"张"可以找到"张三"）
- 不区分大小写
- 可以只设置其中的某些条件

### 导出数据

#### 转移给他人
1. 切换到"导出"标签页
2. 点击"导出为ZIP包"
3. 选择保存位置
4. 生成的ZIP文件可以发给他人
5. 他人可以用"导入账户"功能导入

#### 用Excel分析
1. 切换到"导出"标签页
2. 点击"导出CSV"
3. 用Excel或Numbers打开CSV文件
4. 可进行数据透视表、图表分析等

#### 备份数据
1. 切换到"导出"标签页
2. 点击"创建备份"
3. 自动保存到应用目录
4. 文件名：`backup_[日期时间].zip`

> **建议**: 定期创建备份以防数据丢失

## 重要的统计信息

在"做账"标签页，你可以看到：
- **总额**: 当前账户的所有交易总金额
- **记录数**: 当前账户的总交易笔数

这些信息实时更新，可以快速了解账户情况。

## 常见问题解答

### Q: 如何修改已有的交易记录？
**A**: 在做账标签页的表格中，点击该记录所在行的"编辑"按钮，修改后保存即可。

### Q: 上传的图片存在哪里？
**A**: 所有图片都存储在应用的本地数据目录中，位置为：
```
assets/Finance_Data/accounts/[账户ID]/[交易ID]/
```
- 发票图片：`invoice/`
- 支付记录：`payment/`
- 购买记录：`purchase/`

### Q: 可以删除账户吗？
**A**: 可以。点击"删除账户"按钮，**注意这会删除该账户的所有数据，包括所有交易记录和图片**。建议先导出备份。

### Q: 删除的记录能恢复吗？
**A**: 删除后无法恢复。建议定期创建备份。如果有备份，可以重新导入备份恢复数据。

### Q: 支持多少条记录？
**A**: 理论上无限制，但为了性能考虑，建议单个账户不超过10000条记录。如果数据量大，可以按时间周期分账户。

### Q: 如何合并两个账户？
**A**: 暂不支持自动合并。可以：
1. 导出第一个账户为CSV
2. 导出第二个账户为CSV
3. 用Excel合并两个CSV
4. 手动重新输入或联系开发者

### Q: 我的数据安全吗？
**A**: 所有数据都存储在本地，不上传到任何云服务。数据安全性取决于：
- 你的电脑安全
- 定期备份
- 避免误删除

### Q: 如何转移财务数据到新电脑？
**A**: 
1. 在旧电脑上导出所需账户为ZIP包
2. 将ZIP文件转移到新电脑
3. 在新电脑上的MRobot中使用"导入账户"

### Q: 可以离线使用吗？
**A**: 完全可以。所有功能都在本地运行，无需网络连接。

## 最佳实践建议

### 1. 账户组织
- 按部门分账户
- 按年度分账户
- 按项目分账户

**示例**：
```
- 2024年项目A
- 2024年项目B
- 市场部日常支出
- 技术部日常支出
```

### 2. 记录命名
- 交易人写清楚，便于后期查询
- 备注要具体，说明用途或项目

**好的例子**：
```
日期: 2024-01-15
交易人: 阿里巴巴（云服务）
备注: 购买ECS服务器3台，用于生产环境
```

**不好的例子**：
```
日期: 2024-01-15
交易人: A
备注: 购买
```

### 3. 图片附件
- 每条记录的三张图片位置不同，要对应正确
- 定期检查图片是否完整
- 大额交易务必保留完整凭证

### 4. 数据备份
- 至少每周备份一次
- 重大变化后立即备份
- 备份文件保存到云盘或移动存储

### 5. 查询分析
- 利用"查询"功能快速定位记录
- 定期导出CSV做深度分析
- 使用Excel数据透视表生成报表

## 工作流程举例

### 日常记账流程
```
1. 交易发生
   ↓
2. 保存凭证（发票、截图等）
   ↓
3. 打开MRobot财务模块
   ↓
4. 新建记录
   ↓
5. 上传凭证图片
   ↓
6. 保存记录
```

### 月度对账流程
```
1. 打开"查询"标签页
   ↓
2. 设置日期为本月
   ↓
3. 查询所有记录
   ↓
4. 查看总额是否与银行对账
   ↓
5. 导出CSV做详细分析
   ↓
6. 生成月度报告
```

### 数据转移流程
```
1. 选择需要转移的账户
   ↓
2. 点击"导出为ZIP包"
   ↓
3. 将ZIP文件发送给他人
   ↓
4. 他人接收后点击"导入账户"
   ↓
5. 数据完全转移到他人账户
```

## 获取帮助

- 📖 详细文档：查看 `FINANCE_MODULE_GUIDE.md`
- 💻 API示例：查看 `FINANCE_API_EXAMPLES.py`
- 🐛 报告问题：提交Issue到GitHub
- 💬 提交建议：欢迎反馈和建议

---

**祝你使用愉快！** 🎉
